# 1 什么是数据目录
数据目录就是存放数据库文件、各种日志等数据的地方，可以执行以下命令查看数据目录的路径：
```sql
SHOW VARIABLES LIKE 'datadir';
```
![image.png](<../images/17 MySQL 进阶-数据目录和表空间/1.png>)<br />如上所示，每一个数据库在数据目录中都对应一个文件夹，里面存放该数据库的数据。
# 2 表在文件系统中的表示
## 2.1 表结构
表结构包括表的名称、表中有些列、表中建立了哪些索引等信息。<br />对于 MyISAM 和 InnoDB 存储引擎，它们都在数据目录下对应的数据库子目录下创建了一个专门用于描述表结构的文件，文件名为“表名.frm” ，比如创建一个 test 表，就会创建一个 test.frm 表结构文件。
## 2.2 表中的数据
一个表的数据（包括聚簇索引、二级索引）可以称作为一个表空间，每个表空间对应着文件系统中的一个或多个文件。<br />表空间可以分为两种：系统表空间、独立表空间。
### 2.2.1 系统表空间
在 MySQL 5.6.6 之前，InnoDB 表中的数据都会被默认存储到系统表空间中。  <br />默认情况下， InnoDB 会在数据目录下创建一个名为 ibdata1 的文件，这个文件就是系统表空间文件。<br />如果想让系统表空间对应文件系统上多个实际文件，或者想修改默认的文件名，那么可以在配置文件中配置：
```bash
[server]
innodb_data_file_path=data1:512M;data2:512M:autoextend
```
这样在 MySQL 启动之后就会创建这两个 512M 大小的文件作为系统表空间 ，其中的 autoextend 表明这两个文件，如果不够用会自动扩展 data2 文件的大小。
### 2.2.2 独立表空间
从 MySQL 5.6.6 开始，InnoDB 不会将数据存储到系统表空间中，而是为每个表创建一个独立表空间，位于相应数据库子目录下，文件名为“表名.ibd”。<br />我们也可以选择使用系统表空间，通过在配置文件中配置：
```bash
[server]
innodb_file_per_table=0 # 为 0 时表示使用系统表空间，为 1 时表示使用独立表空间
```
不过该参数只对新建的表起作用，对于已经分配了表空间的表并不起作用。<br />对于已经分配了表空间的表，如果想转移到另一种表空间中，可以使用下边的语法：  
```sql
ALTER TABLE 表名 TABLESPACE innodb_system; -- 转移到系统表空间中
ALTER TABLE 表名 TABLESPACE innodb_file_per_table; -- 转移到独立表空间中
```
# 3 视图在文件系统中的表示
MySQL 中的视图其实是虚拟的表，也就是某个查询语句的一个别名而已，所以在存储视图的时候是不需要存储真实的数据的，只需要把它的结构存储起来就行了。和表一样，描述视图结构的文件也会被存储到所属数据库对应的子目录下边，只会存储一个“视图名.frm”的文件。
